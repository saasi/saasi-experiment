# 传送文件
1./etc/hosts
2.~/.vimrc

3.修改ssh端口(默认11022)

http://blog.51cto.com/chidongting/1761061
sudo vi /etc/ssh/sshd_config
修改11022为22

已改reg,m1,w1

重启ssh服务
sudo /bin/systemctl restart sshd.service
#

vim 快捷输入
sudo vi ~/.vimrc
iabbrev ipdb from ipdb import set_trace;set_trace()

python3:
pip3:
https://ehlxr.me/2017/01/07/CentOS-7-%E5%AE%89%E8%A3%85-Python3%E3%80%81pip3/

fabric 版本要为1.4 否则报错
sudo pip install fabric==1.14.0

为何还是用python2跑的

https://www.cnblogs.com/JahanGu/p/7596546.html
python2 安装 ipdb
pip install ipdb==0.10.2

fabric 改端口从22到11022
fabric 
# env.user = 'root'
env.user = 'webdep'
root 改为 webdep 登陆

yum install docker-ce-17.09.0.ce -y

dokcer 安装
# step 1: 安装必要的一些系统工具
sudo yum install -y yum-utils device-mapper-persistent-data lvm2
# Step 2: 添加软件源信息
sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
# Step 3: 更新并安装 Docker-CE
sudo yum makecache fast
# Step 4: 搜索想要的版本并安装17.09
sudo yum install docker-ce-17.09.0.ce -y
# Step 5: 开启docker服务
sudo /bin/systemctl start docker.service

# 开启sudo权限
# 如果还没有 docker group 就添加一个：
sudo groupadd docker
# 将用户加入该 group 内。然后退出并重新登录就生效啦。
sudo gpasswd -a ${USER} docker
# 重启 docker 服务
sudo /bin/systemctl restart docker.service
# 切换当前会话到新 group 或者重启 X 会话
newgrp - docker

docker swarm 加入节点的时候
2377端口 加入 未开这个端口所以无法进入

明天开了端口后

fabric 指定password
env.password = 'a1cf@f627'

内网之间端口是开放的
只要关闭防火墙就可以了
但是貌似22端口还是不开？？
不是22端口不开，而是ssh服务绑定在11022端口，所以自然无法用22端口访问
5000端口在启动服务之后显示连接失败是因为服务就没起来，而不是未开放端口
docker run --name docker-registry -d -p 5000:5000 registry
然后修改各远程的服务器的docker配置文件

[manager-01:11022] out: ERROR:  Could not find a valid gem 'fluent-plugin-elasticsearch' (= 1.9.2), here is why:
[manager-01:11022] out:           Unable to download data from https://rubygems.org/ - no such name (https://rubygems.org/specs.4.8.gz)
[manager-01:11022] out: The command 'gem install fluent-plugin-elasticsearch --no-rdoc --no-ri --version 1.9.2' returned a non-zero code: 2

manager上要配置镜像加速

私有仓库配置要加信任
在远程的节点地方加，而不是仓库本身
